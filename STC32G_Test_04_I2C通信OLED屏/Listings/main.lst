C251 COMPILER V5.60.0,  main                                                               27/03/24  16:17:38  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE main.c XSMALL INTR2 BROWSE DEBUG PRINT(.\Listings\main.lst) TABS(2) OB
                    -JECT(.\Objects\main.obj) 

stmt  level    source

    1          /*-----------------------------------------------------------------------------------------
    2          
    3          * 时钟选择 22.1184MHZ
    4          
    5          * 参考：STC32G驱动OLED12864，SPI或I2C两种方式
    6          https://www.stcaimcu.com/forum.php?mod=viewthread&tid=2592
    7          (出处: 国芯论坛-STC全球32位8051爱好者互助交流社区)
    8          
    9          * 修改 By PatZer0 @ 2024.03.27
   10              - 统一了类型定义，BYTE/u8/uint8_t -> unsigned char，WORD/u16/uint16_t -> unsigned int，DWORD/u32/uint
             -32_t -> unsigned long
   11              - 精简了include部分，移除了文件中非必要的头文件，否则编译时有太多warnings；
   12          
   13          
   14          * 注意：本程序仅供学习参考，请勿用于商业用途。
   15          -----------------------------------------------------------------------------------------*/
   16          
   17          #include "oled.h"
   18          #include "pic.h"
   19          #include <STC32G.H>
   20          
   21          #define  DELAY_TIME   2000
   22          
   23          void sys_init()
   24          {
   25   1          WTST = 0;  //设置程序指令延时参数，赋值为0可将CPU执行指令的速度设置为最快
   26   1          EAXFR = 1; //扩展寄存器(XFR)访问使能
   27   1          CKCON = 0; //提高访问XRAM速度
   28   1      
   29   1          P0M1 = 0x00;   P0M0 = 0x00;   //设置为准双向口
   30   1          P1M1 = 0x00;   P1M0 = 0x00;   //设置为准双向口
   31   1          P2M1 = 0x00;   P2M0 = 0x00;   //设置为准双向口
   32   1          P3M1 = 0x00;   P3M0 = 0x00;   //设置为准双向口
   33   1          P4M1 = 0x00;   P4M0 = 0x00;   //设置为准双向口
   34   1          P5M1 = 0x00;   P5M0 = 0x00;   //设置为准双向口
   35   1          P6M1 = 0x00;   P6M0 = 0x00;   //设置为准双向口
   36   1          P7M1 = 0x00;   P7M0 = 0x00;   //设置为准双向口
   37   1      }
   38          
   39          
   40          
   41          void main(void)
   42          {
   43   1          unsigned char i;
   44   1          float dat = -12.345;
   45   1          sys_init();                         //系统初始化
   46   1          EA = 1;                             //开总中断
   47   1        OLED_Init();                        //OLED初始化
   48   1      
   49   1          while (1)
   50   1          {
   51   2      //-----------------------------------------显示图片-----------------------------------------   
   52   2          OLED_BuffClear();                                                       //清除全部缓存
   53   2          OLED_BuffShowBMP(0,0,128,8,OLED12864_IMG);                              //显示LOGO图片
*** WARNING C91 IN LINE 53 OF main.c: '&': pointer to different objects
   54   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示
   55   2          delay_ms(DELAY_TIME);                                                   //延时  
   56   2      
C251 COMPILER V5.60.0,  main                                                               27/03/24  16:17:38  PAGE 2   

   57   2      //-----------------------------------------显示字符-----------------------------------------   
   58   2          OLED_BuffClear();                                                       //清除全部缓存
   59   2          OLED_BuffShowString(0,0,"HEELO ,WELCOME TO USE STC32&OLED12864!",0);    //显示数据
   60   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示
   61   2          delay_ms(DELAY_TIME);                                                   //延时  
   62   2          
   63   2      //-----------------------------------------显示汉字-----------------------------------------   
   64   2          OLED_BuffClear();                                                       //清除全部缓存
   65   2          OLED_BuffShowString(0,0,"你好,欢迎使用STC 驱\xfd动OLED12864的历程",0);  //显示数据
   66   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示
   67   2          delay_ms(DELAY_TIME);                                                   //延时         
   68   2          
   69   2      //-----------------------------------------显示点-----------------------------------------   
   70   2          OLED_BuffClear();                                                       //清除全部缓存
   71   2          OLED_BuffShowString(32,0,"画点测试");                                   //显示数据
*** WARNING C96 IN LINE 71 OF main.c: 'OLED_BuffShowString': too few actual parameters
   72   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示  
   73   2          for( i=0;i<64;i++ )                                                     //循环64次
   74   2          {
   75   3              OLED_BuffShowPoint(i*2,25);                                         //显示一个点
*** WARNING C188 IN LINE 75 OF main.c: 'parameter 1': value truncated
   76   3              OLED_BuffShow();                                                    //刷新显示
   77   3              delay_ms(50);                                                       //延时
   78   3          }
   79   2          
   80   2      //-----------------------------------------显示线-----------------------------------------   
   81   2          OLED_BuffClear();                                                       //清除全部缓存
   82   2          OLED_BuffShowString(32,0,"画线测试");                                   //显示数据
*** WARNING C96 IN LINE 82 OF main.c: 'OLED_BuffShowString': too few actual parameters
   83   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示  
   84   2          for( i=0;i<6;i++ )                                                      //循环6次
   85   2          {
   86   3              OLED_BuffShowLine(4,16+8*i,124,16+8*i);                             //显示横着6条线
*** WARNING C188 IN LINE 86 OF main.c: 'parameter 2': value truncated
*** WARNING C188 IN LINE 86 OF main.c: 'parameter 4': value truncated
   87   3              OLED_BuffShow();                                                    //刷新显示
   88   3              delay_ms(100);
   89   3          }        
   90   2          for( i=0;i<16;i+=1 )                                                    //循环16次
   91   2          {
   92   3              OLED_BuffShowLine(8*i+4,16,8*i+4,56);                               //显示16条数线
*** WARNING C188 IN LINE 92 OF main.c: 'parameter 1': value truncated
*** WARNING C188 IN LINE 92 OF main.c: 'parameter 3': value truncated
   93   3              OLED_BuffShow();                                                    //刷新显示
   94   3              delay_ms(100);
   95   3          }  
   96   2      
   97   2      //-----------------------------------------显示圆-----------------------------------------   
   98   2          OLED_BuffClear();                                                       //清除全部缓存
   99   2          OLED_BuffShowString(32,0,"画圆测试");                                   //显示数据
*** WARNING C96 IN LINE 99 OF main.c: 'OLED_BuffShowString': too few actual parameters
  100   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示  
  101   2          for( i=0;i<6;i++ )                                                      //循环6次
  102   2          {
  103   3             OLED_BuffShowCircle(64,40,5+i*3);                                    //画一个圆    
*** WARNING C188 IN LINE 103 OF main.c: 'parameter 3': value truncated
  104   3              OLED_BuffShow();                                                    //刷新显示
  105   3              delay_ms(250);
  106   3          }         
  107   2      
  108   2      //-----------------------------------------显示32大字-----------------------------------------   
  109   2          OLED_BuffClear();                                                       //清除全部缓存
  110   2          OLED_BuffShowString(32,0,"大字测试");                                   //显示数据
*** WARNING C96 IN LINE 110 OF main.c: 'OLED_BuffShowString': too few actual parameters
  111   2          OLED_BuffShowChar32(24,3,1,0);                                          //显示数字1
  112   2          OLED_BuffShowChar32(40,3,0,0);                                          //显示数字0
C251 COMPILER V5.60.0,  main                                                               27/03/24  16:17:38  PAGE 3   

  113   2          OLED_BuffShowChar32(56,3,10,0);                                         //显示：
  114   2          OLED_BuffShowChar32(72,3,5,0);                                          //显示数字5
  115   2          OLED_BuffShowChar32(88,3,5,0);                                          //显示数字5
  116   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示  
  117   2          delay_ms(DELAY_TIME);                                                   //延时   
  118   2      
  119   2      //-----------------------------------------反显测试-----------------------------------------   
  120   2          OLED_BuffClear();                                                       //清除全部缓存
  121   2          OLED_BuffShowString(32,0,"反显测试",0);                                 //显示数据
  122   2          OLED_BuffShowString(16,2,"  这是正\xfd显  ",0);                         //显示数据
  123   2          OLED_BuffShowString(16,4,"  这是反显  ",1);                             //显示数据
  124   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示
  125   2          delay_ms(DELAY_TIME);   
  126   2      
  127   2      //-----------------------------------------变量显示-----------------------------------------   
  128   2          OLED_BuffClear();                                                       //清除全部缓存
  129   2          OLED_BuffShowString(32,0,"变量显示",0);                                 //显示数据
  130   2          OLED_BuffShowNum(0,2,-25169,0) ;                                        //显示数据
  131   2          OLED_BuffShowNum02F(0,4,3.14159,0);                                     //显示数据
  132   2          OLED_BuffShowNum02F(0,6,dat,1);                                         //显示数据
  133   2          OLED_BuffShow();                                                        //将缓存写入显示屏显示
  134   2          delay_ms(DELAY_TIME);   
  135   2              
  136   2              
  137   2          }
  138   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2652     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       156     ------
End of Module Information.


C251 COMPILATION COMPLETE.  11 WARNING(S),  0 ERROR(S)
