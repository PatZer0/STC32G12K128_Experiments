C251 COMPILER V5.60.0,  main                                                               27/03/24  18:19:30  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE main.c XSMALL INTR2 BROWSE DEBUG PRINT(.\Listings\main.lst) TABS(2) OB
                    -JECT(.\Objects\main.obj) 

stmt  level    source

    1          /*-----------------------------------------------------------------------------------------
    2          
    3          * 时钟选择 22.1184MHZ
    4          
    5          * 参考：STC32G驱动OLED12864，SPI或I2C两种方式
    6          https://www.stcaimcu.com/forum.php?mod=viewthread&tid=2592
    7          (出处: 国芯论坛-STC全球32位8051爱好者互助交流社区)
    8          
    9          * 修改 By PatZer0 @ 2024.03.27
   10              - 统一了类型定义，BYTE/u8/uint8_t -> unsigned char，WORD/u16/uint16_t -> unsigned int，DWORD/u32/uint
             -32_t -> unsigned long
   11              - 精简了include部分，移除了文件中非必要的头文件，否则编译时有太多warnings；
   12          
   13          * 提示：
   14              - 默认使用P3.2/P3.3端口，修改请看 iic.c -> IIC_Init() 函数。
   15              - 可以使用 https://javl.github.io/image2cpp/ 将图片转为数组，注意 Draw Mode 需要为 Vertical，否则图片
             -显示不正常。
   16          * 注意：本程序仅供学习参考，请勿用于商业用途。
   17          -----------------------------------------------------------------------------------------*/
   18          
   19          #include "oled.h"
   20          #include "pic.h"
   21          #include <STC32G.H>
   22          
   23          #define  DELAY_TIME   2000
   24          
   25          void sys_init()
   26          {
   27   1          WTST = 0;  //设置程序指令延时参数，赋值为0可将CPU执行指令的速度设置为最快
   28   1          EAXFR = 1; //扩展寄存器(XFR)访问使能
   29   1          CKCON = 0; //提高访问XRAM速度
   30   1      
   31   1          P0M1 = 0x00;   P0M0 = 0x00;   //设置为准双向口
   32   1          P1M1 = 0x00;   P1M0 = 0x00;   //设置为准双向口
   33   1          P2M1 = 0x00;   P2M0 = 0x00;   //设置为准双向口
   34   1          P3M1 = 0x00;   P3M0 = 0x00;   //设置为准双向口
   35   1          P4M1 = 0x00;   P4M0 = 0x00;   //设置为准双向口
   36   1          P5M1 = 0x00;   P5M0 = 0x00;   //设置为准双向口
   37   1          P6M1 = 0x00;   P6M0 = 0x00;   //设置为准双向口
   38   1          P7M1 = 0x00;   P7M0 = 0x00;   //设置为准双向口
   39   1      }
   40          
   41          
   42          
   43          void main(void)
   44          {
   45   1          unsigned char i;
   46   1          float dat = -12.345;
   47   1          sys_init();                         //系统初始化
   48   1          EA = 1;                             //开总中断
   49   1        OLED_Init();                        //OLED初始化
   50   1      
   51   1          while (1)
   52   1          {
   53   2              // OLED_BuffClear();                                                       //清除全部缓存
   54   2              // OLED_BuffShowString(0,0,"STC32G128K128   \xfdTEST测试",0);    //显示数据
   55   2              // OLED_BuffShow();                                                        //将缓存写入显示屏显示
   56   2              // delay_ms(DELAY_TIME);                                                   //延时 
C251 COMPILER V5.60.0,  main                                                               27/03/24  18:19:30  PAGE 2   

   57   2              OLED_BuffClear();                                                       //清除全部缓存
   58   2              OLED_BuffShowBMP(0,0,128,8,OLED12864_ZWU_LOGO);                              //显示LOGO图片
*** WARNING C91 IN LINE 58 OF main.c: '&': pointer to different objects
   59   2              OLED_BuffShow();                                                        //将缓存写入显示屏显示
   60   2              delay_ms(DELAY_TIME);                                                   //延时  
   61   2      
   62   2      // =============================================================================================
   63   2      // 以下均为源代码自带的测试代码，如需要使用可以取消注释
   64   2      // //-----------------------------------------显示图片-----------------------------------------   
   65   2          // OLED_BuffClear();                                                       //清除全部缓存
   66   2          // OLED_BuffShowBMP(0,0,128,8,OLED12864_IMG);                              //显示LOGO图片
   67   2          // OLED_BuffShow();                                                        //将缓存写入显示屏显示
   68   2          // delay_ms(DELAY_TIME);                                                   //延时 
   69   2      
   70   2      // //-----------------------------------------显示字符-----------------------------------------   
   71   2      //     OLED_BuffClear();                                                       //清除全部缓存
   72   2      //     OLED_BuffShowString(0,0,"HEELO ,WELCOME TO USE STC32&OLED12864!",0);    //显示数据
   73   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示
   74   2      //     delay_ms(DELAY_TIME);                                                   //延时 
   75   2          
   76   2      // //-----------------------------------------显示汉字-----------------------------------------   
   77   2      //     OLED_BuffClear();                                                       //清除全部缓存
   78   2      //     OLED_BuffShowString(0,0,"你好,欢迎使用STC 驱\xfd动OLED12864的历程",0);  //显示数据
   79   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示
   80   2      //     delay_ms(DELAY_TIME);                                                   //延时        
   81   2          
   82   2      // //-----------------------------------------显示点-----------------------------------------   
   83   2      //     OLED_BuffClear();                                                       //清除全部缓存
   84   2      //     OLED_BuffShowString(32,0,"画点测试");                                   //显示数据
   85   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示 
   86   2      //     for( i=0;i<64;i++ )                                                     //循环64次
   87   2      //     {
   88   2      //         OLED_BuffShowPoint(i*2,25);                                         //显示一个点
   89   2      //         OLED_BuffShow();                                                    //刷新显示
   90   2      //         delay_ms(50);                                                       //延时
   91   2      //     }
   92   2          
   93   2      // //-----------------------------------------显示线-----------------------------------------   
   94   2      //     OLED_BuffClear();                                                       //清除全部缓存
   95   2      //     OLED_BuffShowString(32,0,"画线测试");                                   //显示数据
   96   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示 
   97   2      //     for( i=0;i<6;i++ )                                                      //循环6次
   98   2      //     {
   99   2      //         OLED_BuffShowLine(4,16+8*i,124,16+8*i);                             //显示横着6条线
  100   2      //         OLED_BuffShow();                                                    //刷新显示
  101   2      //         delay_ms(100);
  102   2      //     }        
  103   2      //     for( i=0;i<16;i+=1 )                                                    //循环16次
  104   2      //     {
  105   2      //         OLED_BuffShowLine(8*i+4,16,8*i+4,56);                               //显示16条数线
  106   2      //         OLED_BuffShow();                                                    //刷新显示
  107   2      //         delay_ms(100);
  108   2      //     }  
  109   2      
  110   2      // //-----------------------------------------显示圆-----------------------------------------   
  111   2      //     OLED_BuffClear();                                                       //清除全部缓存
  112   2      //     OLED_BuffShowString(32,0,"画圆测试");                                   //显示数据
  113   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示 
  114   2      //     for( i=0;i<6;i++ )                                                      //循环6次
  115   2      //     {
  116   2      //        OLED_BuffShowCircle(64,40,5+i*3);                                    //画一个圆    
  117   2      //         OLED_BuffShow();                                                    //刷新显示
  118   2      //         delay_ms(250);
  119   2      //     }         
  120   2      
  121   2      // //-----------------------------------------显示32大字-----------------------------------------   
C251 COMPILER V5.60.0,  main                                                               27/03/24  18:19:30  PAGE 3   

  122   2      //     OLED_BuffClear();                                                       //清除全部缓存
  123   2      //     OLED_BuffShowString(32,0,"大字测试");                                   //显示数据
  124   2      //     OLED_BuffShowChar32(24,3,1,0);                                          //显示数字1
  125   2      //     OLED_BuffShowChar32(40,3,0,0);                                          //显示数字0
  126   2      //     OLED_BuffShowChar32(56,3,10,0);                                         //显示：
  127   2      //     OLED_BuffShowChar32(72,3,5,0);                                          //显示数字5
  128   2      //     OLED_BuffShowChar32(88,3,5,0);                                          //显示数字5
  129   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示 
  130   2      //     delay_ms(DELAY_TIME);                                                   //延时  
  131   2      
  132   2      // //-----------------------------------------反显测试-----------------------------------------   
  133   2      //     OLED_BuffClear();                                                       //清除全部缓存
  134   2      //     OLED_BuffShowString(32,0,"反显测试",0);                                 //显示数据
  135   2      //     OLED_BuffShowString(16,2,"  这是正\xfd显  ",0);                         //显示数据
  136   2      //     OLED_BuffShowString(16,4,"  这是反显  ",1);                             //显示数据
  137   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示
  138   2      //     delay_ms(DELAY_TIME);   
  139   2      
  140   2      // //-----------------------------------------变量显示-----------------------------------------   
  141   2      //     OLED_BuffClear();                                                       //清除全部缓存
  142   2      //     OLED_BuffShowString(32,0,"变量显示",0);                                 //显示数据
  143   2      //     OLED_BuffShowNum(0,2,-25169,0) ;                                        //显示数据
  144   2      //     OLED_BuffShowNum02F(0,4,3.14159,0);                                     //显示数据
  145   2      //     OLED_BuffShowNum02F(0,6,dat,1);                                         //显示数据
  146   2      //     OLED_BuffShow();                                                        //将缓存写入显示屏显示
  147   2      //     delay_ms(DELAY_TIME);   
  148   2          }
  149   1      }
*** WARNING C47 IN LINE 45 OF main.c: 'i': unreferenced local variable


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      3173     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
